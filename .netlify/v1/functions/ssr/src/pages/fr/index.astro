---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import Hero from '../../components/Hero.astro';
import Craftsmanship from '../../components/Craftsmanship.astro';
import FeaturedProducts from '../../components/FeaturedProducts.astro';
import ContactPreview from '../../components/ContactPreview.astro';
import { getTranslation } from '../../i18n/utils.js';

const lang = 'fr';
const t = getTranslation(lang);

const title = `${t.hero.title} - Le Coin d'Or`;
const description =
  "Bijouterie d'exception √† Gharda√Øa depuis 1987. Cr√©ations uniques en or 18 carats, artisanat traditionnel et service personnalis√©. D√©couvrez nos collections exclusives.";
---

<Layout title={title} description={description} lang={lang}>
  <Header />

  <main>
    <Hero />
    <Craftsmanship />

    <!-- üîΩ Iframe qui s‚Äôajuste dynamiquement -->
    <iframe
      id="ringSizerIframe"
      src="https://ringsizer-bijouterie.netlify.app/fr"
      class="w-full border-none overflow-hidden transition-all duration-300 ease-in-out"
      scrolling="no"
    ></iframe>

    <!-- üîΩ Script pour ajuster dynamiquement la hauteur de l‚Äôiframe -->
    <script>
      window.addEventListener('message', (event) => {
        const iframe = document.getElementById('ringSizerIframe');

        // Optionnel : v√©rifier l‚Äôorigine pour plus de s√©curit√©
        // if (event.origin !== 'https://ringsizer-bijouterie.netlify.app') return;

        if (iframe && event.data?.height) {
          iframe.style.height = event.data.height + 'px';
        }
      });
    </script>

    <FeaturedProducts />
    <ContactPreview />
  </main>

  <Footer />
</Layout>
