---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Hero from '../components/Hero.astro';
import Craftsmanship from '../components/Craftsmanship.astro';
import FeaturedProducts from '../components/FeaturedProducts.astro';
import ContactPreview from '../components/ContactPreview.astro';
import { getTranslation, getCurrentLang } from '../i18n/utils.js';

const lang = getCurrentLang(Astro.url);
const t = getTranslation(lang);

const title = `${t.hero.title} - Le Coin d'Or`;
const description = "Ù…Ø¬ÙˆÙ‡Ø±Ø§Øª ÙØ§Ø®Ø±Ø© ÙÙŠ ØºØ±Ø¯Ø§ÙŠØ© Ù…Ù†Ø° Ø¹Ø§Ù… 1987. ØªØµØ§Ù…ÙŠÙ… ÙØ±ÙŠØ¯Ø© Ù…Ù† Ù†ÙˆØ¹Ù‡Ø§ Ù…Ù† Ø§Ù„Ø°Ù‡Ø¨ Ø¹ÙŠØ§Ø± 18ØŒ Ø­Ø±ÙÙŠØ© ØªÙ‚Ù„ÙŠØ¯ÙŠØ© ÙˆØ®Ø¯Ù…Ø© Ø´Ø®ØµÙŠØ©. Ø§ÙƒØªØ´Ù Ù…Ø¬Ù…ÙˆØ¹Ø§ØªÙ†Ø§ Ø§Ù„Ø­ØµØ±ÙŠØ©.";
---

<Layout title={title} description={description} lang={lang}>
  <Header />
  <main>
    <Hero />
    <Craftsmanship />
       <iframe
      id="ringSizerIframe"
      src="https://ringsizer-bijouterie.netlify.app"
      class="w-full border-none overflow-hidden transition-all duration-300 ease-in-out"
      scrolling="no"
    ></iframe>
     <!-- ğŸ”½ Script pour ajuster dynamiquement la hauteur de lâ€™iframe -->
    <script>
      window.addEventListener('message', (event) => {
        const iframe = document.getElementById('ringSizerIframe');

        // Optionnel : vÃ©rifier lâ€™origine pour plus de sÃ©curitÃ©
        // if (event.origin !== 'https://ringsizer-bijouterie.netlify.app') return;

        if (iframe && event.data?.height) {
          iframe.style.height = event.data.height + 'px';
        }
      });
    </script>
    <FeaturedProducts />
    <ContactPreview />
  </main>
  <Footer />
</Layout>